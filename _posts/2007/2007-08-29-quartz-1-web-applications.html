---
layout: post
title: 'Quartz (1): Web Applications'
date: '2007-08-29T15:33:00.000+02:00'
author: martin
tags: 
modified_time: '2012-04-16T14:55:41.675+02:00'
blogger_id: tag:blogger.com,1999:blog-987786588703208935.post-2069426924513665097
blogger_orig_url: http://bxm-dev.blogspot.com/2007/08/quartz-1-web-applications.html
category: dev
---

<p>This is how I added a <a href="http://www.opensymphony.com/quartz">Quartz</a> job to my webapp:</p><ol><li>Implement a simple Quartz job</li><li>Create a configuration file that would start this job</li><li>Create a Quarty properties file</li><li>Add the Quartz context listener to the webapp to auto-start the scheduler</li></ol><ol><li><p>Implement a simple Quartz job (example/ExampleJob.java):<br /><pre class="brush:xml">This Job just prints the value of the job parameter &#8220;message&#8221; to the console.package example;<br />&nbsp;<br />import org.quartz.Job;<br />import JobExecutionContext;<br />&nbsp;<br />public class ExampleJob implements Job {<br />&nbsp;<br />&#160;&#160;&#160;&#160;public void execute(JobExecutionContext context) {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;System.out.println(context.getJobDetail().getJobDataMap().get("message"));<br />&#160;&#160;&#160;&#160;}<br />&nbsp;<br />}<br /></pre></li><p></p><li><p>Create a configuration file that would start this job (resources/quartz/jobs.xml):<br /><pre class="brush:xml">The job is triggered 4 times (3 repreats) in a 10 seconds interval.&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />&lt;quartz xmlns="http://www.opensymphony.com/quartz/JobSchedulingData"<br />&#160;&#160;&#160;&#160;xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br />&#160;&#160;&#160;&#160;xsi:schemaLocation="http://www.opensymphony.com/quartz/JobSchedulingData<br />&#160;&#160;&#160;&#160;http://www.opensymphony.com/quartz/xml/job_scheduling_data_1_5.xsd"<br />&#160;&#160;&#160;&#160;version="1.5"&gt;<br />&#160;&#160;&lt;job&gt;<br />&#160;&#160;&#160;&#160;&lt;job-detail&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&lt;name&gt;ExampleJob&lt;/name&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&lt;group&gt;examples&lt;/group&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&lt;job-class&gt;example.ExampleJob&lt;/job-class&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&lt;job-data-map&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;entry&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;key&gt;message&lt;/key&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;value&gt;Hello World&lt;/value&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;/entry&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&lt;/job-data-map&gt;<br />&#160;&#160;&#160;&#160;&lt;/job-detail&gt;<br />&#160;&#160;&#160;&#160;&lt;trigger&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&lt;simple&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;name&gt;ExampleTrigger&lt;/name&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;group&gt;examples&lt;/group&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;job-name&gt;ExampleJob&lt;/job-name&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;job-group&gt;examples&lt;/job-group&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;repeat-count&gt;3&lt;/repeat-count&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;repeat-interval&gt;10000&lt;/repeat-interval&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&lt;/simple&gt;<br />&#160;&#160;&#160;&#160;&lt;/trigger&gt;<br />&#160;&#160;&lt;/job&gt;<br />&lt;/quartz&gt;<br /></pre></li><p></p><pre class="brush:xml">Create a Quarty properties file (resources/quartz/quartz.properties):# General properties:<br />org.quartz.scheduler.instanceName=MACHwbQuartzScheduler<br />org.quartz.scheduler.instanceId=AUTO<br /># Thread pool:<br />org.quartz.threadPool.class=org.quartz.simpl.SimpleThreadPool<br />org.quartz.threadPool.threadCount=1<br /># Load jobs from XML file:<br />org.quartz.plugin.jobInitializer.class=org.quartz.plugins.xml.JobInitializationPlugin<br />org.quartz.plugin.jobInitializer.fileName=resources/quartz/jobs.xml<br />org.quartz.plugin.jobInitializer.failOnFileNotFound=true<br /></pre></li><p></p><pre class="brush:xml">Add the Quartz context listener to the webapp to auto-start the scheduler (WEB-INF/web.xml): &lt;web-app&gt;<br />&#160;&#160;[...]<br />&#160;&#160;&lt;context-param&gt;<br />&#160;&#160;&#160;&#160;&lt;param-name&gt;config-file&lt;/param-name&gt;<br />&#160;&#160;&#160;&#160;&lt;param-value&gt;resources/quartz/quartz.properties&lt;/param-value&gt;<br />&#160;&#160;&#160;&#160;&lt;description&gt;Location of the Quartz configuration file&lt;/description&gt;<br />&#160;&#160;&lt;/context-param&gt;<br />&#160;&#160;[...]<br />&#160;&#160;&lt;listener&gt;<br />&#160;&#160;&#160;&#160;&lt;listener-class&gt;org.quartz.ee.servlet.QuartzInitializerListener&lt;/listener-class&gt;<br />&#160;&#160;&lt;/listener&gt;<br />&#160;&#160;[...]<br />&lt;/web-app&gt;<br /></pre></li><p></p></ol><p></p><p>&#8230;but it is <a href="http://bxm.at/blogs/java/index.php?title=quartz_spring&amp;more=1">easier with Spring</a>.</p><div class="item_footer"><p><small><a href="http://bxm.at/blogs/java/quartz_webapp">Original post</a> blogged on <a href="http://b2evolution.net/">b2evolution</a>.</small></p></div>