---
layout: post
title: 'XDoclet: "Ambiguous subtask definition" error'
date: '2007-08-17T12:49:00.000+02:00'
author: martin
tags:
- maven
modified_time: '2012-04-17T00:10:55.931+02:00'
blogger_id: tag:blogger.com,1999:blog-987786588703208935.post-3220528088109305794
blogger_orig_url: http://bxm-dev.blogspot.com/2007/08/xdoclet-subtask-definition-error.html
---

When running a Maven 2 build with an EJB and Webapp project that both use XDoclet (1.2.3), you receive an “Ambiguous subtask definition” error when calling XDoclet the second time.<br />Reason is <a href="http://opensource.atlassian.com/projects/xdoclet/browse/XDT-1435">this XDoclet bug</a>, but since XDoclet is dead all you can do about it is patch the “DocletTask.java” by yourself, uncommenting the lines 472 and 473:<br /><pre class="brush:xml">DocletContext.setSingleInstance(null);<br />// Fix for ...<br />subtaskNameMap = null; // uncommented<br />subtaskMap = null; // uncommented<br />//destDir = null;<br />//mergeDir = null;<br />//subTasks = null;<br />//configParams = null;</pre>See <a href="http://jira.codehaus.org/browse/MOJO-223">http://jira.codehaus.org/browse/MOJO-223</a><br /><h3>Update</h3>A better way is to use the latest snapshot of the <a href="http://mojo.codehaus.org/xdoclet-maven-plugin/">Xdoclet Maven Plugin</a>:<br /><pre class="brush:xml">[...]<br />&lt;pluginRepositories&gt;<br />&nbsp;&nbsp;&lt;pluginRepository&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&gt;CodehausSnapshots&lt;/id&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;CodehausSnapshots&lt;/name&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;url&gt;http://snapshots.repository.codehaus.org&lt;/url&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;layout&gt;default&lt;/layout&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;releases&gt;&lt;enabled&gt;false&lt;/enabled&gt;&lt;/releases&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;<br />&nbsp;&nbsp;&lt;/pluginRepository&gt;<br />&lt;/pluginRepositories&gt;<br />[...]<br />&lt;build&gt;<br />&nbsp;&nbsp;&lt;plugins&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;plugin&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;artifactId&gt;xdoclet-maven-plugin&lt;/artifactId&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;version&gt;1.0-beta-1-SNAPSHOT&lt;/version&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[...]<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/plugin&gt;<br />&nbsp;&nbsp;&lt;/plugins&gt;<br />&lt;/build&gt;<br /><div class="item_footer"><br /><small><a href="http://bxm.at/blogs/java/xdoclet_ambiguous_subtask_definition_err">Original post</a> blogged on <a href="http://b2evolution.net/">b2evolution</a>.</small></div><br /></pre>